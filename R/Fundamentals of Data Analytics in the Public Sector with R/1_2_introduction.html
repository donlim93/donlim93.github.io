<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="quarto-1.7.27" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

    <title>introduction</title>
    <style>
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      div.columns {
        display: flex;
        gap: min(4vw, 1.5em);
      }
      div.column {
        flex: auto;
        overflow-x: auto;
      }
      div.hanging-indent {
        margin-left: 1.5em;
        text-indent: -1.5em;
      }
      ul.task-list {
        list-style: none;
      }
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */
        vertical-align: middle;
      }
      /* CSS for syntax highlighting */
      html {
        -webkit-text-size-adjust: 100%;
      }
      pre > code.sourceCode {
        white-space: pre;
        position: relative;
      }
      pre > code.sourceCode > span {
        display: inline-block;
        line-height: 1.25;
      }
      pre > code.sourceCode > span:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode > span {
        color: inherit;
        text-decoration: inherit;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        pre > code.sourceCode {
          white-space: pre-wrap;
        }
        pre > code.sourceCode > span {
          text-indent: -5em;
          padding-left: 5em;
        }
      }
      pre.numberSource code {
        counter-reset: source-line 0;
      }
      pre.numberSource code > span {
        position: relative;
        left: -4em;
        counter-increment: source-line;
      }
      pre.numberSource code > span > a:first-child::before {
        content: counter(source-line);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
      }
      pre.numberSource {
        margin-left: 3em;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        pre > code.sourceCode > span > a:first-child::before {
          text-decoration: underline;
        }
      }
    </style>

    <script src="1_2_introduction_files/libs/clipboard/clipboard.min.js"></script>
    <script src="1_2_introduction_files/libs/quarto-html/quarto.js" type="module"></script>
    <script src="1_2_introduction_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
    <script src="1_2_introduction_files/libs/quarto-html/popper.min.js"></script>
    <script src="1_2_introduction_files/libs/quarto-html/tippy.umd.min.js"></script>
    <script src="1_2_introduction_files/libs/quarto-html/anchor.min.js"></script>
    <link href="1_2_introduction_files/libs/quarto-html/tippy.css" rel="stylesheet" />
    <link
      href="1_2_introduction_files/libs/quarto-html/quarto-syntax-highlighting-985aa47af68dae11cd4d235c71fb941e.css"
      rel="stylesheet"
      id="quarto-text-highlighting-styles"
    />
    <script src="1_2_introduction_files/libs/bootstrap/bootstrap.min.js"></script>
    <link href="1_2_introduction_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet" />
    <link
      href="1_2_introduction_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css"
      rel="stylesheet"
      append-hash="true"
      id="quarto-bootstrap"
      data-mode="light"
    />
  </head>

  <body class="fullcontent quarto-light">
    <div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
      <main class="content" id="quarto-document-content">
        <section id="getting-started-with-r" class="level1">
          <h1>Getting Started with R</h1>
          <p>
            In this course we’re going to write our analyses in a mixture of plain text, computer
            code, and images. This form of analsyis is called a
            <strong>computational narrative</strong>, and it allows us to weave together discussion
            about the analysis, programming that actual does the analysis, and visuals to support
            our investigations and communication of the results. Now, I’ve tried to fully document
            my lectures in this format so that you can download these files to refer to later
            without having to re-watch videos. This means you can quickly skim through lectures with
            both the transcript of what I said as well as the code I’ve written – sort of like a
            hybrid between a textbook and a video lecture.
          </p>
          <p>
            In this notebook I’m going to introduce you to some of the basic functions of R. But
            before I do that, let’s talk about this whole notebook format.
          </p>
          <section id="r-markdown" class="level2">
            <h2 class="anchored" data-anchor-id="r-markdown">R Markdown</h2>
            <p>
              R is very strong in supporting this computational narrative approach to analysis, and
              does so through R Markdown files which usually end in .Rmd like this one. These files
              can be converted to more typical reading formats like PDFs, HTML files, or even Word
              documents through the “knitting” process within RStudio. There are a lot of different
              functions and features of R Markdown as well as options for knitting these documents
              into output, but we’re just going to deal with the basics in this course.
            </p>
            <p>
              First, you can control formatting of the document using a very simple markup language
              and I’ll have a cheat sheet linked in the course. Lines that start with an octothorpe
              – usually called a pound sign, number sign, or the hash mark, #, are headers, and
              should show up in an outline to the right of the markdown document in RStudio. If you
              click the visualize button at the top of the window you’ll see a rendered version of
              the document, and you’ll see that there are numerous different levels of headings you
              can use just by adding more number signs in front of the heading. You can also control
              some of the basic output text formatting too, such as
              <strong>bolding words</strong> by surrounding them with two asterixes,
              <em>italicizing words</em> by surrounding them with single asterixes, or even
              <del>striking through</del> words by surrounding them with tildes.
            </p>
            <p>
              You’ll see more examples of formatting in RMarkdown to come, including tables and
              lists, but let’s get on to the writing code. RMarkdown files are made up of text and
              code “chunks”. To create a code chunk we start a line with three back ticks followed
              by the curly braces and the lower case r, like this:
            </p>
            <p>
              The triple back ticks tell RStudio that what is being written should be executable,
              and you’ll see that RStudio automatically adds a play button to the right hand side
              and changes our styling. The lower case r tells RStudio that the language for this
              chunk is R, but other languages such as SQL and Python are supported.
            </p>
            <p>
              Inside of a code chunk we can write any valid R syntax, but not text formatting. You
              can execute chunks in any order, but the norm is to write chunks to be executed from
              top to bottom just like we would read a notebook, or write computer code.
            </p>
          </section>
          <section id="r-programming" class="level2">
            <h2 class="anchored" data-anchor-id="r-programming">R Programming</h2>
            <section id="language-basics" class="level3">
              <h3 class="anchored" data-anchor-id="language-basics">Language Basics</h3>
              <p>
                The R programming has a long history and a lot of nuance, and instead of explaining
                it to you in a comprehensive manner, I want to explain it through some examples.
                I’ve linked a few books for deeper study in the course if you want to dig into
                details, and I highly encourage you to do so!
              </p>
              <p>Let’s create a new code chunk and look at some language fundamentals.</p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb1">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inside of a code chunk a pound sign starts a comment, so you'll see a lot of</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># my commentary like this. It's also customary (but not required) for code to be</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># limited in length on each line, so you'll see the formatting change slightly.</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># In R variables are created using the assignment operator, which is either a</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># &lt;- for a left hand assignment, or -&gt; for a right hand assignment. Let's create</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># two variables, a and b.</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>a<span class="ot">&lt;-</span><span class="dv">3</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span><span class="ot">-&gt;</span>b</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Assigning a variable on the right hand side of an expression isn't very</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># common, so you'll mostly see the former syntax of &lt;- used. You can also use</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># a single equal sign for variable assignment, but that's not as commonly done</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># in R.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
              </div>
              <p>
                Variables persist between code chunks. If you execute the code you’ll see the
                <code>Environment</code> pane in the right hand of RStudio now has two variables in
                it, one for <code>a</code> and one for <code>b</code>.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb2">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We can use typical mathematical operators to compare values. The double</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># equals sign will check if the two variables are equal, while the greater than</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># sign will check if the one variable is larger than the other</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>a<span class="sc">&gt;</span>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] FALSE</code></pre>
                </div>
              </div>
              <p>
                When we have executed a cell and output is printed to the console in RStudio.
                RStudio does this just as if we entered the lines in manually on the console as
                well, so we get to see our code comments written there too. The actual output, which
                is made up of the the result of expressions, is also placed in an output cell
                underneath the code chunk. This cell exists both in the source editor, as well as in
                the visual editor. If you want to have text displayed along with your outputs, you
                need to use the <code>print</code> function.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb4">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Checking if a is greater than b..."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] "Checking if a is greater than b..."</code></pre>
                </div>
                <div class="sourceCode cell-code" id="cb6">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>a<span class="sc">&gt;</span>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] FALSE</code></pre>
                </div>
                <div class="sourceCode cell-code" id="cb8">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Checking if a is equal to b..."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] "Checking if a is equal to b..."</code></pre>
                </div>
                <div class="sourceCode cell-code" id="cb10">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>a<span class="sc">==</span>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] FALSE</code></pre>
                </div>
              </div>
              <p>
                The base R language has many different functions and operators included, and while
                I’ll introduce several of them in this course I’m also going to move fairly quickly
                in doing so and expect that you have either a little bit of programming knowledge
                already. If not that’s ok – but I would encourage you to check out some of the
                reference material I’ve linked in the course shell as a guide to the basics of the
                language.
              </p>
            </section>
            <section id="language-fundamentals" class="level3">
              <h3 class="anchored" data-anchor-id="language-fundamentals">Language Fundamentals</h3>
              <p>
                R is known as a <code>vectorized</code> language, and the basic data structures in R
                are all vectors. For instance, when we create the variable <code>a</code> previously
                it looked like it was just a whole number, and integer. But actually, R stores this
                as a vector – an ordered list of items all of the same format (in this case,
                <code>double</code> values). We can see the type of the items in a vector using the
                <code>typeof</code> function, and we can see how many items are in the vector using
                the <code>len</code> function.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb12">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the type of the items in a</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] "double"</code></pre>
                </div>
                <div class="sourceCode cell-code" id="cb14">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the number of items in a</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] 1</code></pre>
                </div>
              </div>
              <p>
                This vectorization feature of R is a bit confusing at first for those who have prior
                programming experience, but it’s actually one of the reasons R is so clean to write
                and relatively high performance for data science. To create a vector of multiple
                different values we use the combine function, called <code>c</code> for short. This
                just combines all of the input it is given into a single vector.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb16">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a vector of three numbers</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>a<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the type of items in a</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">typeof</span>(a))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] "double"</code></pre>
                </div>
                <div class="sourceCode cell-code" id="cb18">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the number of items in a</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">length</span>(a))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] 4</code></pre>
                </div>
              </div>
              <p>
                Once you’ve run this code chunk you’ll see that the type of the items in the vector
                <code>a</code> are still doubles, but the length is now of size 4. You might also
                have noticed that the value for <code>a</code> has changed in the environment pane
                in the upper right hand corner of RStudio. It now tells us this variable is a
                numeric variable (this is called the <code>mode</code> of the variable), and it
                shows the values in it. It also provides a set notation of <code>[1:4]</code>, which
                means the first item is at position <code>1</code> in the vector, and the last item
                is at position <code>4</code>. This syntax is exactly how we will query the vector
                to get data out.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb20">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We can access the first item in the vector using the [1] syntax. In R we don't</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># start indexing at 0, like most other programming languages!</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(a[<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] 2</code></pre>
                </div>
                <div class="sourceCode cell-code" id="cb22">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We can also pull out multiple items in the vector at once by taking a slice.</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The syntax for this is [start:end], so if we want the second through fourth</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># items we would just do...</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(a[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] 4 6 8</code></pre>
                </div>
              </div>
              <p>
                This slicing notation is very commonly used for operations on vectors. A useful
                functionality of vectorized languages like R is that we can do operations between
                two vectors of the same length. For instance, let’s add two three item vectors
                together.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb24">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>a<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>b<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(a<span class="sc">+</span>b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] 5 7 9</code></pre>
                </div>
              </div>
              <p>
                We can also take a vector of size one, for instance a single number, and apply it to
                all items in a larger vector. Let’s create a new vector which is each item in
                <code>a</code> multiplied by 5.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb26">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>d<span class="ot">&lt;-</span>a<span class="sc">*</span><span class="dv">5</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1]  5 10 15</code></pre>
                </div>
              </div>
              <p>
                Two important things to note here! First, you’ll see that I did not declare my
                variable as <code>c</code>, but instead called it <code>d</code>. Why? Well,
                <code>c</code> already is a function in R, and if I create a variable with the same
                name it would mean that I could no longer use <code>c()</code> to combine items! In
                addition, it’s important to know that when we multiple a vector, in this case
                <code>a</code>, by another vector, in this case an unnamed vector with just the
                element <code>5</code> in it, what actually happens underneath is that the second
                vector is combined with itself until it is the same size as the first vector. This
                allows us to do operations between vectors of unequal sizes, as long as combination
                is something we’re ok with.
              </p>
            </section>
            <section id="language-types" class="level3">
              <h3 class="anchored" data-anchor-id="language-types">Language Types</h3>
              <p>
                In R we have a number of different types that can be used but we generally use
                vectors of one of the following:
              </p>
              <ol type="1">
                <li>integers, which are whole numbers</li>
                <li>doubles, which are numbers which may have a fraction</li>
                <li>characters, which are called strings in other languages</li>
                <li>
                  logicals, which are either true or false and are called booleans in other
                  languages
                </li>
              </ol>
              <p>
                We also have a few non-vector objects. Here is where the R term for
                <code>object</code> tends to cause some confusion for people who have a programming
                background. I won’t go into the specifics of object oriented programming and how R
                differs here, but in this course we will commonly also create:
              </p>
              <ol type="1">
                <li>lists, which look like vectors but have items of different types</li>
                <li>functions, which are called closures in R and operate on data</li>
                <li>
                  dataframes, which are a form of two dimensional tabular data which we will explore
                  in great detail in this course
                </li>
              </ol>
              <p>
                Lets take a look at lists first. To make a list we just use the combine function
                with items of different types.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb28">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lets create a new list using the list() function</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>my_list<span class="ot">&lt;-</span><span class="fu">list</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="cn">TRUE</span>,<span class="st">'text'</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Now we can print the type of the list</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">typeof</span>(my_list))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] "list"</code></pre>
                </div>
                <div class="sourceCode cell-code" id="cb30">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lets compare that with a vectored version using c()</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>my_vector<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="cn">TRUE</span>,<span class="st">'text'</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Lets print the type of the vector</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">typeof</span>(my_vector))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] "character"</code></pre>
                </div>
              </div>
              <p>
                You can see that R indicates the list is of type list, but that the vector is of
                type character! If we look at the environment in the upper right corner of RStudio
                we get a bit more information. The variable <code>my_vector</code> is listed in the
                values section, and we can see that it is a vector of four items, and that each one
                is a set of characters. What’s happened is that when we use combine, the
                <code>c()</code> function, R converts the types automatically for us, and in this
                case converting the types to character strings is the best it can do. Watch out for
                this! A vector <strong>only</strong> holds data of a single type, even though it
                holds multiple pieces of data.
              </p>
              <p>
                And speaking of data, there’s a new entry in the environment pane, called Data, and
                it has our list in it.
              </p>
            </section>
            <section id="composite-types" class="level3">
              <h3 class="anchored" data-anchor-id="composite-types">Composite types</h3>
              <p>
                In R, data can have attributes, or a list of key/value pairs which describe the data
                in some way. A commonly used attribute is the <code>name</code> for a given
                variable, and this becomes useful when we start talking about complex structures
                such as lists and dataframes. Let’s create a list for a person, and set the name
                attribute for each of the items in that list to be something we might expect to see
                in a personnel management system.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb32">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's create a new employee record for me. Remember that each item in a list </span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># is actually a vector, and we can name the vectors just by prepending them</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># with a word</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>employee<span class="ot">&lt;-</span><span class="fu">list</span>(<span class="at">userid=</span><span class="st">'brooksch'</span>, <span class="at">name=</span><span class="st">'Christopher Brooks'</span>, <span class="dv">43</span>, <span class="at">instructor=</span><span class="cn">TRUE</span>, <span class="at">courses=</span><span class="fu">c</span>(<span class="dv">101</span>,<span class="dv">102</span>,<span class="dv">200</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
              </div>
              <p>
                When you expand the data field for this list in the environment pane you can get a
                sense of how this works. We can see that we have four vectors with names – userid,
                name, instructor, and courses – all of length one except for my course list, which
                is of length three. We can see the type for each of these items, and we can see that
                there is one item in there which has no name, the number 43. So we’re starting to
                deal with our first really structured data, and being able to read this environment
                pane will be critical to your understanding of your work!
              </p>
              <p>
                We see a dollar sign in front of each of these names, and that’s an import cue – you
                can use the <code>$</code> operator to select out an item from a list based on the
                name of that item.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb33">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's print out the employee userid</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(employee<span class="sc">$</span>userid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] "brooksch"</code></pre>
                </div>
              </div>
              <p>
                So, what do you do for my age, which has not been given a name? Well, we’ve already
                seen that we can use the slicing notation to get this out based on the position
                inside of a list
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb35">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print out the age of the employee</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(employee[<span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[[1]]
[1] 43</code></pre>
                </div>
              </div>
              <p>
                Ok, well, let’s dig in just a bit and clarify what we have here. The
                <code>name</code> attribute is not an attribute of the items in the list, but is an
                attribute of the list itself. We can print out what the attributes are of an object
                using <code>attribute</code>.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb37">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What attributes does employee have?</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">attributes</span>(employee))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>$names
[1] "userid"     "name"       ""           "instructor" "courses"   </code></pre>
                </div>
                <div class="sourceCode cell-code" id="cb39">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What is the data type of the attributes result?</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">typeof</span>(<span class="fu">attributes</span>(employee)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] "list"</code></pre>
                </div>
              </div>
              <p>
                So we see that the names are stored in something called <code>$names</code>. Be
                careful! This is not an item in <code>employee</code>, otherwise we would expect to
                see it up in the environment pane with everything else. This is actually stored
                separately by R for each variable, and we see here it’s a list itself. We also see
                that the age of the individual does have an entry, but it’s the “empty string”,
                which is just a string of zero length. So, how do we correct this? We can use the
                <code>names</code> function to get access to the values, and
                <code>setnames()</code> to change them.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb41">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First we get the names out of the employee object</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>attribute_names<span class="ot">&lt;-</span><span class="fu">names</span>(employee)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Then we change the one we want</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>attribute_names[<span class="dv">3</span>]<span class="ot">&lt;-</span><span class="st">"age"</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Now we update the names, this returns a new employee so we need to assign it</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co"># back to our employee reference</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>employee<span class="ot">&lt;-</span><span class="fu">setNames</span>(employee,attribute_names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
              </div>
            </section>
            <section id="nothing" class="level3">
              <h3 class="anchored" data-anchor-id="nothing">Nothing</h3>
              <p>
                One last fundamental and then we’ll start playing with real data! We often have a
                need to represent <strong>nothing</strong>. This could be because we have missing
                data, which is pretty common in data science tasks. Or it could be because we
                haven’t yet defined a field or object but we know there will be one, and this is
                pretty common in computer science tasks. Underneath computers represent everything
                in binary, one’s and zeros. So how do we represent the lack of something in
                sequences of ones and zeros? This problem isn’t unique to R, and plagues a lot of
                different programming paradigms and languages. In short, we have two different cases
                – missing data versus unknown object references – and R handles both of these
                differently.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb42">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We represent the lack of a reference to something as a null value</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="cn">NULL</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co"># When we print out the type of this object, we'll see that it is called NULL</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">typeof</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] "NULL"</code></pre>
                </div>
                <div class="sourceCode cell-code" id="cb44">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># How long is this vector?</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">length</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] 0</code></pre>
                </div>
                <div class="sourceCode cell-code" id="cb46">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># And we can' do logical comparison on null values with ==</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x<span class="sc">==</span><span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>logical(0)</code></pre>
                </div>
              </div>
              <p>
                You’ll see that the <code>x==NULL</code> generates a warning in R, that annoying
                little red squiggle underline, and that the return value is something of
                <code>logical(0)</code>. This is a logical vector, but of length zero! There are no
                values in it. It’s not <code>TRUE</code> nor is it <code>FALSE</code>. When we use
                <code>NULL</code> to represent the lack of something we need to use the
                <code>is.null()</code> function to see if it actually is null.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb48">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">is.null</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] TRUE</code></pre>
                </div>
              </div>
              <p>
                The missing value indicator, <code>NA</code>, is actually something similar. It also
                is represented by a logical vector, but in this case it has a single item in it
                which is the value <code>NA</code>!
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb50">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We represent missing data with an NA</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="cn">NA</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co"># When we print out the type of this object, we'll see that it is also a logical</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co"># vector, not an NA</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">typeof</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] "logical"</code></pre>
                </div>
                <div class="sourceCode cell-code" id="cb52">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># But if we look at the length of that vector it indeed has something in it!</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">length</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] 1</code></pre>
                </div>
                <div class="sourceCode cell-code" id="cb54">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># And what is that? Turns out it is.... NA</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] NA</code></pre>
                </div>
              </div>
              <p>
                When we want to do comparisons for missing values – which we’re going to do a lot of
                in this course! – we’ll use a function such as <code>is.na()</code>.
              </p>
              <div class="cell">
                <div class="sourceCode cell-code" id="cb56">
                  <pre
                    class="sourceCode r code-with-copy"
                  ><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                </div>
                <div class="cell-output cell-output-stdout">
                  <pre><code>[1] TRUE</code></pre>
                </div>
              </div>
            </section>
          </section>
          <section id="wrap-up" class="level2">
            <h2 class="anchored" data-anchor-id="wrap-up">Wrap up</h2>
            <p>
              Ok, this was a pretty long lecture, but I wanted to put down some fundamentals. We’re
              going to reinforce all of this discussion through examples and working with real data,
              and we’re going to start right away in the next lecture! At the same time, R is an old
              language with lots of nuance, so if you would like to get under the hood a bit and
              understand how it works, or even if you just want a reference guide while you join us
              on this journey we’ve got some resources listed in the course to help you.
            </p>
          </section>
        </section>
      </main>
      <!-- /main column -->
      <script id="quarto-html-after-body" type="application/javascript">
        window.document.addEventListener("DOMContentLoaded", function (event) {
          const icon = "";
          const anchorJS = new window.AnchorJS();
          anchorJS.options = {
            placement: "right",
            icon: icon,
          };
          anchorJS.add(".anchored");
          const isCodeAnnotation = (el) => {
            for (const clz of el.classList) {
              if (clz.startsWith("code-annotation-")) {
                return true;
              }
            }
            return false;
          };
          const onCopySuccess = function (e) {
            // button target
            const button = e.trigger;
            // don't keep focus
            button.blur();
            // flash "checked"
            button.classList.add("code-copy-button-checked");
            var currentTitle = button.getAttribute("title");
            button.setAttribute("title", "Copied!");
            let tooltip;
            if (window.bootstrap) {
              button.setAttribute("data-bs-toggle", "tooltip");
              button.setAttribute("data-bs-placement", "left");
              button.setAttribute("data-bs-title", "Copied!");
              tooltip = new bootstrap.Tooltip(button, {
                trigger: "manual",
                customClass: "code-copy-button-tooltip",
                offset: [0, -8],
              });
              tooltip.show();
            }
            setTimeout(function () {
              if (tooltip) {
                tooltip.hide();
                button.removeAttribute("data-bs-title");
                button.removeAttribute("data-bs-toggle");
                button.removeAttribute("data-bs-placement");
              }
              button.setAttribute("title", currentTitle);
              button.classList.remove("code-copy-button-checked");
            }, 1000);
            // clear code selection
            e.clearSelection();
          };
          const getTextToCopy = function (trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
          };
          const clipboard = new window.ClipboardJS(
            ".code-copy-button:not([data-in-quarto-modal])",
            {
              text: getTextToCopy,
            }
          );
          clipboard.on("success", onCopySuccess);
          if (window.document.getElementById("quarto-embedded-source-code-modal")) {
            const clipboardModal = new window.ClipboardJS(
              ".code-copy-button[data-in-quarto-modal]",
              {
                text: getTextToCopy,
                container: window.document.getElementById("quarto-embedded-source-code-modal"),
              }
            );
            clipboardModal.on("success", onCopySuccess);
          }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("/" + window.location.host + "/");
          var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          };
          // Inspect non-navigation links and adorn them if external
          var links = window.document.querySelectorAll(
            "a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)"
          );
          for (var i = 0; i < links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
          function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
            const config = {
              allowHTML: true,
              maxWidth: 500,
              delay: 100,
              arrow: false,
              appendTo: function (el) {
                return el.parentElement;
              },
              interactive: true,
              interactiveBorder: 10,
              theme: "quarto",
              placement: "bottom-start",
            };
            if (contentFn) {
              config.content = contentFn;
            }
            if (onTriggerFn) {
              config.onTrigger = onTriggerFn;
            }
            if (onUntriggerFn) {
              config.onUntrigger = onUntriggerFn;
            }
            window.tippy(el, config);
          }
          const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
          for (var i = 0; i < noterefs.length; i++) {
            const ref = noterefs[i];
            tippyHover(ref, function () {
              // use id or data attribute instead here
              let href = ref.getAttribute("data-footnote-href") || ref.getAttribute("href");
              try {
                href = new URL(href).hash;
              } catch {}
              const id = href.replace(/^#\/?/, "");
              const note = window.document.getElementById(id);
              if (note) {
                return note.innerHTML;
              } else {
                return "";
              }
            });
          }
          const xrefs = window.document.querySelectorAll("a.quarto-xref");
          const processXRef = (id, note) => {
            // Strip column container classes
            const stripColumnClz = (el) => {
              el.classList.remove("page-full", "page-columns");
              if (el.children) {
                for (const child of el.children) {
                  stripColumnClz(child);
                }
              }
            };
            stripColumnClz(note);
            if (id === null || id.startsWith("sec-")) {
              // Special case sections, only their first couple elements
              const container = document.createElement("div");
              if (note.children && note.children.length > 2) {
                container.appendChild(note.children[0].cloneNode(true));
                for (let i = 1; i < note.children.length; i++) {
                  const child = note.children[i];
                  if (child.tagName === "P" && child.innerText === "") {
                    continue;
                  } else {
                    container.appendChild(child.cloneNode(true));
                    break;
                  }
                }
                if (window.Quarto?.typesetMath) {
                  window.Quarto.typesetMath(container);
                }
                return container.innerHTML;
              } else {
                if (window.Quarto?.typesetMath) {
                  window.Quarto.typesetMath(note);
                }
                return note.innerHTML;
              }
            } else {
              // Remove any anchor links if they are present
              const anchorLink = note.querySelector("a.anchorjs-link");
              if (anchorLink) {
                anchorLink.remove();
              }
              if (window.Quarto?.typesetMath) {
                window.Quarto.typesetMath(note);
              }
              if (note.classList.contains("callout")) {
                return note.outerHTML;
              } else {
                return note.innerHTML;
              }
            }
          };
          for (var i = 0; i < xrefs.length; i++) {
            const xref = xrefs[i];
            tippyHover(
              xref,
              undefined,
              function (instance) {
                instance.disable();
                let url = xref.getAttribute("href");
                let hash = undefined;
                if (url.startsWith("#")) {
                  hash = url;
                } else {
                  try {
                    hash = new URL(url).hash;
                  } catch {}
                }
                if (hash) {
                  const id = hash.replace(/^#\/?/, "");
                  const note = window.document.getElementById(id);
                  if (note !== null) {
                    try {
                      const html = processXRef(id, note.cloneNode(true));
                      instance.setContent(html);
                    } finally {
                      instance.enable();
                      instance.show();
                    }
                  } else {
                    // See if we can fetch this
                    fetch(url.split("#")[0])
                      .then((res) => res.text())
                      .then((html) => {
                        const parser = new DOMParser();
                        const htmlDoc = parser.parseFromString(html, "text/html");
                        const note = htmlDoc.getElementById(id);
                        if (note !== null) {
                          const html = processXRef(id, note);
                          instance.setContent(html);
                        }
                      })
                      .finally(() => {
                        instance.enable();
                        instance.show();
                      });
                  }
                } else {
                  // See if we can fetch a full url (with no hash to target)
                  // This is a special case and we should probably do some content thinning / targeting
                  fetch(url)
                    .then((res) => res.text())
                    .then((html) => {
                      const parser = new DOMParser();
                      const htmlDoc = parser.parseFromString(html, "text/html");
                      const note = htmlDoc.querySelector("main.content");
                      if (note !== null) {
                        // This should only happen for chapter cross references
                        // (since there is no id in the URL)
                        // remove the first header
                        if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                          note.children[0].remove();
                        }
                        const html = processXRef(null, note);
                        instance.setContent(html);
                      }
                    })
                    .finally(() => {
                      instance.enable();
                      instance.show();
                    });
                }
              },
              function (instance) {}
            );
          }
          let selectedAnnoteEl;
          const selectorForAnnotation = (cell, annotation) => {
            let cellAttr = 'data-code-cell="' + cell + '"';
            let lineAttr = 'data-code-annotation="' + annotation + '"';
            const selector = "span[" + cellAttr + "][" + lineAttr + "]";
            return selector;
          };
          const selectCodeLines = (annoteEl) => {
            const doc = window.document;
            const targetCell = annoteEl.getAttribute("data-target-cell");
            const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
            const annoteSpan = window.document.querySelector(
              selectorForAnnotation(targetCell, targetAnnotation)
            );
            const lines = annoteSpan.getAttribute("data-code-lines").split(",");
            const lineIds = lines.map((line) => {
              return targetCell + "-" + line;
            });
            let top = null;
            let height = null;
            let parent = null;
            if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
              if (lineIds.length > 1) {
                const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                height = bottom - top;
              }
              if (top !== null && height !== null && parent !== null) {
                // cook up a div (if necessary) and position it
                let div = window.document.getElementById("code-annotation-line-highlight");
                if (div === null) {
                  div = window.document.createElement("div");
                  div.setAttribute("id", "code-annotation-line-highlight");
                  div.style.position = "absolute";
                  parent.appendChild(div);
                }
                div.style.top = top - 2 + "px";
                div.style.height = height + 4 + "px";
                div.style.left = 0;
                let gutterDiv = window.document.getElementById(
                  "code-annotation-line-highlight-gutter"
                );
                if (gutterDiv === null) {
                  gutterDiv = window.document.createElement("div");
                  gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                  gutterDiv.style.position = "absolute";
                  const codeCell = window.document.getElementById(targetCell);
                  const gutter = codeCell.querySelector(".code-annotation-gutter");
                  gutter.appendChild(gutterDiv);
                }
                gutterDiv.style.top = top - 2 + "px";
                gutterDiv.style.height = height + 4 + "px";
              }
              selectedAnnoteEl = annoteEl;
            }
          };
          const unselectCodeLines = () => {
            const elementsIds = [
              "code-annotation-line-highlight",
              "code-annotation-line-highlight-gutter",
            ];
            elementsIds.forEach((elId) => {
              const div = window.document.getElementById(elId);
              if (div) {
                div.remove();
              }
            });
            selectedAnnoteEl = undefined;
          };
          // Handle positioning of the toggle
          window.addEventListener(
            "resize",
            throttle(() => {
              elRect = undefined;
              if (selectedAnnoteEl) {
                selectCodeLines(selectedAnnoteEl);
              }
            }, 10)
          );
          function throttle(fn, ms) {
            let throttle = false;
            let timer;
            return (...args) => {
              if (!throttle) {
                // first call gets through
                fn.apply(this, args);
                throttle = true;
              } else {
                // all the others get throttled
                if (timer) clearTimeout(timer); // cancel #2
                timer = setTimeout(() => {
                  fn.apply(this, args);
                  timer = throttle = false;
                }, ms);
              }
            };
          }
          // Attach click handler to the DT
          const annoteDls = window.document.querySelectorAll("dt[data-target-cell]");
          for (const annoteDlNode of annoteDls) {
            annoteDlNode.addEventListener("click", (event) => {
              const clickedEl = event.target;
              if (clickedEl !== selectedAnnoteEl) {
                unselectCodeLines();
                const activeEl = window.document.querySelector(
                  "dt[data-target-cell].code-annotation-active"
                );
                if (activeEl) {
                  activeEl.classList.remove("code-annotation-active");
                }
                selectCodeLines(clickedEl);
                clickedEl.classList.add("code-annotation-active");
              } else {
                // Unselect the line
                unselectCodeLines();
                clickedEl.classList.remove("code-annotation-active");
              }
            });
          }
          const findCites = (el) => {
            const parentEl = el.parentElement;
            if (parentEl) {
              const cites = parentEl.dataset.cites;
              if (cites) {
                return {
                  el,
                  cites: cites.split(" "),
                };
              } else {
                return findCites(el.parentElement);
              }
            } else {
              return undefined;
            }
          };
          var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
          for (var i = 0; i < bibliorefs.length; i++) {
            const ref = bibliorefs[i];
            const citeInfo = findCites(ref);
            if (citeInfo) {
              tippyHover(citeInfo.el, function () {
                var popup = window.document.createElement("div");
                citeInfo.cites.forEach(function (cite) {
                  var citeDiv = window.document.createElement("div");
                  citeDiv.classList.add("hanging-indent");
                  citeDiv.classList.add("csl-entry");
                  var biblioDiv = window.document.getElementById("ref-" + cite);
                  if (biblioDiv) {
                    citeDiv.innerHTML = biblioDiv.innerHTML;
                  }
                  popup.appendChild(citeDiv);
                });
                return popup.innerHTML;
              });
            }
          }
        });
      </script>
    </div>
    <!-- /content -->
  </body>
</html>
